<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <!-- Viewport meta tag dengan initial-scale=1.0 untuk tampilan mobile yang tepat -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Lingkungan</title>
    <link rel="stylesheet" href="style/style.css">
    <!-- Penggunaan font Plus Jakarta Sans sesuai dengan desain Indonesia -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Mobile Sidebar Toggle - disembunyikan di tampilan default mobile untuk menyederhanakan UI -->
        <div class="sidebar-toggle" onclick="toggleSidebar()">
            <div></div>
            <div></div>
            <div></div>
        </div>
        
        <!-- Desktop Sidebar - tersembunyi di mobile -->
        <div class="desktop-sidebar">
            <div class="sidebar-header">
                <div class="logo">Aplikasi Lingkungan</div>
            </div>
            <nav class="sidebar-menu">
                <!-- Penambahan semantik <nav> untuk aksesibilitas yang lebih baik -->
                <div class="sidebar-menu-item active">
                    <div class="icon"><img src="./assets/icons/beranda.png" alt="Home"></div>
                    <div class="label">Beranda</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/ri_megaphone-fill.png" alt="Info"></div>
                    <div class="label">Informasi</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/Group.png" alt="Iuran"></div>
                    <div class="label">Iuran</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/surat.png" alt="Surat"></div>
                    <div class="label">Penerbitan Surat</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/voting.png" alt="Voting"></div>
                    <div class="label">Voting</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/lucide_cctv.png" alt="CCTV"></div>
                    <div class="label">CCTV</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/toa.png" alt="Lapor"></div>
                    <div class="label">Lapor</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/ph_phone-call.png" alt="Kontak"></div>
                    <div class="label">Kontak Darurat</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/ion_calendar.png" alt="Agenda"></div>
                    <div class="label">Agenda</div>
                </div>
                <div class="sidebar-menu-item">
                    <div class="icon"><img src="./assets/icons/akun.png" alt="Akun"></div>
                    <div class="label">Akun</div>
                </div>
                <div class="sidebar-menu-item emergency-item">
                    <div class="icon"><img src="./assets/icons/darurat.png" alt="Emergency"></div>
                    <div class="label">DARURAT</div>
                </div>
            </nav>
        </div>
        
        <!-- Header Section - dioptimalkan untuk mobile dengan ruang yang lebih ergonomis -->
        <header class="header">
            <div class="header-background" id="dynamicBackground"></div>
            <div class="header-gradient"></div>
            
            <!-- User Profile - layout dioptimalkan untuk tampilan mobile -->
            <div class="user-profile">
                <div class="profile-container">
                    <img src="assets/images/profile1.jpg" alt="Profile Picture" class="profile-pic">
                    <div class="badge">
                        <span class="badge-green">G7</span>
                        <span class="badge-white">38</span>
                    </div>
                </div>
                
                <div class="user-info">
                    <h2 class="user-name">Raditya</h2>
                    <div class="user-role">
                        <img src="assets/icons/warga.png" alt="Role Icon">
                        Warga
                    </div>
                    <div class="user-address">
                        <img src="assets/icons/warga.png" alt="Address Icon">
                        RT 12 RW09 Perum Taman Aster
                    </div>
                </div>
            </div>
            
            <!-- Notification Icon - posisi sudah optimal untuk mobile -->
            <div class="notification-icon">
                <img src="assets/icons/notifikasi.png" alt="Notification">
            </div>
            
            <!-- Menu Title - jelas dan menonjol -->
            <div class="menu-title">Menu Utama</div>
        </header>
        
        <!-- Main Content - layout dioptimalkan untuk mobile -->
        <main class="main-content">
            <!-- Menu Card - grid 3x2 optimal untuk layar mobile -->
            <div class="menu-card">
                <div class="menu-grid">
                    <!-- Iuran -->
                    <div class="menu-item">
                        <div class="menu-icon">
                            <img src="assets/icons/Group.png" alt="Iuran">
                        </div>
                        <div class="menu-label">Iuran</div>
                    </div>
                    
                    <!-- Penerbitan Surat -->
                    <div class="menu-item">
                        <div class="menu-icon">
                            <img src="assets/icons/surat.png" alt="Penerbitan Surat">
                        </div>
                        <div class="menu-label">Penerbitan Surat</div>
                    </div>
                    
                    <!-- Voting -->
                    <div class="menu-item">
                        <div class="menu-icon">
                            <img src="assets/icons/voting.png" alt="Voting">
                        </div>
                        <div class="menu-label">Voting</div>
                    </div>
                    
                    <!-- CCTV -->
                    <div class="menu-item">
                        <div class="menu-icon">
                            <img src="assets/icons/lucide_cctv.png" alt="CCTV">
                        </div>
                        <div class="menu-label">CCTV</div>
                    </div>
                    
                    <!-- Lapor -->
                    <div class="menu-item">
                        <div class="menu-icon">
                            <img src="assets/icons/toa.png" alt="Lapor">
                        </div>
                        <div class="menu-label">Lapor</div>
                    </div>
                    
                    <!-- Kontak Darurat -->
                    <div class="menu-item">
                        <div class="menu-icon">
                            <img src="assets/icons/ph_phone-call.png" alt="Kontak Darurat">
                        </div>
                        <div class="menu-label">Kontak Darurat</div>
                    </div>
                </div>
            </div>
            
            <!-- Information Section - dioptimalkan dengan card yang lebih terbaca di mobile -->
            <section class="info-section">
                <div class="info-header">
                    <!-- Bagian ini perlu ditambahkan di dalam section info-section, tepat setelah div info-header -->
                    <h3 class="info-title">Informasi</h3>
                    <div class="view-all">
                        Lihat Semua
                        <img src="assets/icons/panah.png" alt="Arrow Right">
                    </div>
                </div>
                <div class="info-cards-container carousel">
                    <div class="carousel-container">
                        <!-- Card informatif dioptimalkan untuk mobile -->
                        <div class="info-card carousel-slide">
                            <img src="assets/images/gambar1.png" alt="Information Image">
                            <div class="info-overlay">
                                <div class="info-card-title">Rencana Agenda Perayaan HUT RI 2025</div>
                                <div class="info-card-desc">Dalam rangka perayaan Hari Ulang Tahun Republik Indonesia (HUT RI) dengan berbagai kegiatan...</div>
                            </div>
                        </div>
                        
                        <!-- Slide kedua untuk carousel -->
                        <div class="info-card carousel-slide">
                            <img src="assets/images/gambar2.jpg" alt="Information Image">
                            <div class="info-overlay">
                                <div class="info-card-title">Hasil Pemilihan Pengurus RT Periode 2025-2028</div>
                                <div class="info-card-desc">Berikut adalah hasil pemilihan pengurus RT periode 2025-2028 yang telah dilaksanakan pada tanggal...</div>
                            </div>
                        </div>
                        
                        <!-- Slide ketiga untuk carousel -->
                        <div class="info-card carousel-slide">
                            <img src="assets/images/perumahan.jpeg" alt="Information Image">
                            <div class="info-overlay">
                                <div class="info-card-title">Jadwal Pemeliharaan Taman Lingkungan</div>
                                <div class="info-card-desc">Pengumuman tentang jadwal rutin pemeliharaan taman lingkungan dan area umum di perumahan kita...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Navigasi carousel -->
                    <div class="carousel-navigation">
                        <span class="carousel-dot active" data-index="0"></span>
                        <span class="carousel-dot" data-index="1"></span>
                        <span class="carousel-dot" data-index="2"></span>
                    </div>
                    
                    <!-- Arrow navigasi carousel -->
                    <div class="carousel-arrows">
                        <div class="carousel-arrow prev">&#10094;</div>
                        <div class="carousel-arrow next">&#10095;</div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Bottom Navigation - dioptimalkan untuk jempol di mobile -->
        <nav class="bottom-nav">
            <div class="nav-item nav-active">
                <div class="nav-icon">
                    <img src="assets/icons/beranda.png" alt="Home">
                </div>
                <div class="nav-label">Beranda</div>
            </div>
            
            <div class="nav-item">
                <div class="nav-icon">
                    <img src="assets/icons/ri_megaphone-fill.png" alt="Info">
                </div>
                <div class="nav-label">Informasi</div>
            </div>
            
            <div class="nav-item emergency-button-container">
                <!-- Tombol darurat dioptimalkan ukurannya untuk kenyamanan tap -->
                <div class="emergency-button" id="openModalButton">
                    <div class="emergency-icon">
                        <img src="assets/icons/darurat.png" alt="Emergency">
                    </div>
                </div>
                <div class="emergency-label">DARURAT</div>
            </div>
            
            <div class="nav-item">
                <div class="nav-icon">
                    <img src="assets/icons/ion_calendar.png" alt="Agenda">
                </div>
                <div class="nav-label">Agenda</div>
            </div>
            
            <div class="nav-item">
                <div class="nav-icon">
                    <img src="assets/icons/akun.png" alt="Account">
                </div>
                <div class="nav-label">Akun</div>
            </div>
        </nav>
    </div>

    <!-- Modal untuk Tombol Darurat - animasi dioptimalkan untuk mobile -->
    <div id="modalEmergency" class="modal">
        <div class="modal-content">
            <!-- Konten modal emergency dioptimalkan untuk mobile -->
            <div class="emergency-container">
                <!-- Header with Back Button - lebih terlihat untuk tap -->
                <div class="emergency-header">
                    <button class="back-button" id="closeModalButton" aria-label="Tutup Modal">
                    <img src="assets/icons/back-icon.png" alt="Kembali">
                    </button>
                    <div class="emergency-title">Tombol Darurat</div>
                </div>

                <!-- Emergency Options - grid dioptimalkan untuk mobile -->
                <div class="emergency-grid">
                    <div class="emergency-button-option">
                    <div class="emergency-icon-option">
                        <img src="assets/icons/pencurian.png" alt="Pencurian">
                    </div>
                    Pencurian
                    </div>
                    <div class="emergency-button-option">
                    <div class="emergency-icon-option">
                        <img src="assets/icons/kecelakaan.png" alt="Kecelakaan">
                    </div>
                    Kecelakaan
                    </div>
                    <div class="emergency-button-option">
                    <div class="emergency-icon-option">
                        <img src="assets/icons/kebakaran.png" alt="Kebakaran">
                    </div>
                    Kebakaran
                    </div>
                    <div class="emergency-button-option">
                    <div class="emergency-icon-option">
                        <img src="assets/icons/hewan_liar.png" alt="Hewan Liar">
                    </div>
                    Hewan Liar
                    </div>
                </div>

                <!-- Other Danger Input - input field dioptimalkan untuk ketik di mobile -->
                <div class="other-danger">
                    <strong>Bahaya Lainnya</strong><br/>
                    Kirim pesan langsung ke pihak security
                    <div class="input-with-icon">
                    <input type="text" placeholder="Ketik pesan..." aria-label="Pesan darurat lainnya">
                    <button class="send-button" onclick="kirimPesan()" aria-label="Kirim pesan">
                        <img src="assets/icons/send-circle.png" alt="Kirim" class="send-icon">
                    </button>
                    </div>
                </div>

                <!-- Footer Note - peringatan lebih jelas -->
                <div class="footer-note">
                    Gunakan tombol dengan bijak sesuai kebutuhan.<br/>
                    Jangan lakukan inisiasi pengetesan tanpa permintaan dari pengembang aplikasi!
                </div>
            </div>
        </div>
    </div>

    <!-- 1. HTML Snippet - Letakkan sebelum tag </body> -->
    <div id="emergencyConfirmationPopup" class="emergency-popup">
    <div class="emergency-popup-content">
        <h2 class="emergency-popup-title">Pesan Darurat Terkirim</h2>
        
        <!-- Card Peringatan dengan ikon segitiga kuning -->
        <div class="emergency-alert-card">
        <div class="emergency-alert-icon">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 4L44 40H4L24 4Z" fill="#FFCA28"/>
            <path d="M24 34C25.1 34 26 33.1 26 32V20C26 18.9 25.1 18 24 18C22.9 18 22 18.9 22 20V32C22 33.1 22.9 34 24 34Z" fill="#212121"/>
            <path d="M24 38C25.1 38 26 37.1 26 36C26 34.9 25.1 34 24 34C22.9 34 22 34.9 22 36C22 37.1 22.9 38 24 38Z" fill="#212121"/>
            </svg>
        </div>
        <p class="emergency-alert-text">
            Petugas keamanan telah menerima pesan darurat yang anda kirim
        </p>
        </div>
        
        <!-- Perbaikan HTML untuk Card Kontak Darurat -->
        <div class="emergency-contact-card">
        <div class="emergency-contact-icon">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="48" height="48" rx="10" fill="#D32F2F"/>
            <path d="M32 24.92V30C32 30.5304 31.7893 31.0391 31.4142 31.4142C31.0391 31.7893 30.5304 32 30 32C24.4913 32 19.1673 29.8393 15.1673 25.8393C11.1673 21.8393 9 16.5087 9 11C9 10.4696 9.21071 9.96086 9.58579 9.58579C9.96086 9.21071 10.4696 9 11 9H16.08C16.5545 8.99987 17.0127 9.17675 17.3734 9.49727C17.7341 9.81779 17.9729 10.261 18.04 10.73L18.96 15.65C19.0379 16.0378 18.9801 16.4401 18.7966 16.7931C18.6131 17.1461 18.3162 17.4322 17.95 17.6L15.2 19.29C16.2391 21.717 17.8756 23.8509 19.9349 25.4737C21.9942 27.0964 24.4247 28.1437 27 28.47L28.74 25.68C28.9148 25.3346 29.1894 25.0581 29.5271 24.887C29.8647 24.7159 30.2486 24.6591 30.62 24.73L35.77 25.68C36.2265 25.7532 36.6438 25.9926 36.948 26.3499C37.2523 26.7072 37.4177 27.16 37.42 27.63V32C37.42 32.5304 37.2093 33.0391 36.8342 33.4142C36.4591 33.7893 35.9504 34 35.42 34H30C29.4696 34 28.9609 33.7893 28.5858 33.4142C28.2107 33.0391 28 32.5304 28 32V24.92C28 24.3896 28.2107 23.8809 28.5858 23.5058C28.9609 23.1307 29.4696 22.92 30 22.92H32C32.5304 22.92 33.0391 23.1307 33.4142 23.5058C33.7893 23.8809 34 24.3896 34 24.92H32Z" fill="white"/>
            </svg>
        </div>
        <p class="emergency-contact-text">
            Tekan tombol <strong>Kontak Darurat</strong> untuk mendapatkan nomor dan narahubung dari instansi terkait bila diperlukan
        </p>
        </div>
        
        <!-- Section untuk Nonaktifkan Tombol Darurat -->
        <div class="emergency-deactivate-section">
        <h3 class="emergency-deactivate-title">Nonaktifkan Tombol Darurat</h3>
        <p class="emergency-deactivate-text">Bila situasi telah kondusif tombol dapat dimatikan</p>
        
        <!-- Tombol Aksi -->
        <button class="emergency-action-button safe-button" id="situationSafeButton">
            Situasi Telah Aman
        </button>
        <button class="emergency-action-button accident-button" id="accidentalPressButton">
            Tombol Tidak Sengaja Tertekan
        </button>
        </div>
        
        <!-- Footer Note -->
        <p class="emergency-footer-note">
        Gunakan tombol dengan bijak sesuai kebutuhan.<br>
        Jangan lakukan inisiasi pengetesan tanpa permintaan<br>
        dari pengembang aplikasi!
        </p>
    </div>
    </div>

    <script>
        // Deteksi layar mobile yang lebih akurat
        function isMobile() {
            return window.innerWidth < 768;
        }
        
        // Toggle sidebar dengan animasi yang lebih halus
        function toggleSidebar() {
            document.body.classList.toggle('show-sidebar');
        }
        
        // Pengaturan tampilan berdasarkan ukuran layar yang lebih responsif
        function responsiveAdjustments() {
            const desktopElements = document.querySelectorAll('.desktop-only');
            
            if (isMobile()) {
                desktopElements.forEach(el => {
                    el.style.display = 'none';
                });
            } else {
                desktopElements.forEach(el => {
                    el.style.display = 'block';
                });
            }
        }
        
        // Event listener optimasi untuk performa mobile
        document.addEventListener('DOMContentLoaded', function() {
            responsiveAdjustments();
            
            // Optimasi event listener untuk resize dengan throttling
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(responsiveAdjustments, 250);
            });
        });

        // Fungsi untuk modal darurat - dioptimalkan untuk performa mobile
        const modal = document.querySelector('#modalEmergency');
        const openModalButton = document.querySelector('#openModalButton');
        const closeModalButton = document.querySelector('#closeModalButton');

        // Tambahan error handling untuk pengalaman mobile yang lebih baik
        if (openModalButton) {
            openModalButton.addEventListener('click', () => {
                modal.classList.add('show');
                // Mencegah scroll pada background saat modal terbuka
                document.body.style.overflow = 'hidden';
            });
        }

        if (closeModalButton) {
            closeModalButton.addEventListener('click', () => {
                modal.classList.remove('show');
                // Mengaktifkan kembali scroll saat modal ditutup
                document.body.style.overflow = '';
            });
        }

        // Menutup modal jika klik di luar modal - tetap dipertahankan untuk UX yang lebih baik
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.classList.remove('show');
                document.body.style.overflow = '';
            }
        });

        // Placeholder untuk fungsi kirim pesan
        function kirimPesan() {
            const input = document.querySelector('.input-with-icon input');
            if (input && input.value.trim() !== '') {
                alert('Pesan darurat dikirim: ' + input.value);
                input.value = '';
            } else {
                alert('Silakan ketik pesan terlebih dahulu');
            }
        }

        // Menambahkan background dinamis ke header
        document.addEventListener('DOMContentLoaded', function() {
            // Array gambar untuk background header (contoh paths)
            const backgroundImages = [
                'assets/images/perumahan.jpeg',
            ];
            
            // Set background awal
            const dynamicBackground = document.getElementById('dynamicBackground');
            if (dynamicBackground) {
                dynamicBackground.style.backgroundImage = `url('${backgroundImages[0]}')`;
                
                // Mengubah background secara periodik (opsional)
                let currentBgIndex = 0;
                setInterval(() => {
                    currentBgIndex = (currentBgIndex + 1) % backgroundImages.length;
                    dynamicBackground.style.backgroundImage = `url('${backgroundImages[currentBgIndex]}')`;
                }, 10000); // Ganti setiap 10 detik
            }
            
            // Inisialisasi carousel
            initCarousel();
            
            // Fungsi responsive tetap dipertahankan
            responsiveAdjustments();
            
            // Optimasi event listener untuk resize dengan throttling
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(responsiveAdjustments, 250);
            });
        });
        
        // Fungsi untuk carousel
        function initCarousel() {
            const carouselContainer = document.querySelector('.carousel-container');
            const carouselSlides = document.querySelectorAll('.carousel-slide');
            const carouselDots = document.querySelectorAll('.carousel-dot');
            const prevArrow = document.querySelector('.carousel-arrow.prev');
            const nextArrow = document.querySelector('.carousel-arrow.next');
            let currentSlide = 0;
            let startX, moveX;
            
            // Auto rotate carousel
            let carouselInterval = setInterval(nextSlide, 5000);
            
            // Fungsi untuk menampilkan slide tertentu
            function showSlide(index) {
                // Reset interval untuk mencegah slide berubah terlalu cepat setelah interaksi manual
                clearInterval(carouselInterval);
                carouselInterval = setInterval(nextSlide, 5000);
                
                // Validasi index
                if (index >= carouselSlides.length) {
                    currentSlide = 0;
                } else if (index < 0) {
                    currentSlide = carouselSlides.length - 1;
                } else {
                    currentSlide = index;
                }
                
                // Menggeser ke slide yang aktif
                if (carouselContainer) {
                    carouselContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
                }
                
                // Update dot yang aktif
                carouselDots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === currentSlide);
                });
            }
            
            // Fungsi untuk slide berikutnya
            function nextSlide() {
                showSlide(currentSlide + 1);
            }
            
            // Fungsi untuk slide sebelumnya
            function prevSlide() {
                showSlide(currentSlide - 1);
            }
            
            // Event listeners untuk navigasi dot
            carouselDots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    showSlide(index);
                });
            });
            
            // Event listeners untuk arrow
            if (prevArrow) prevArrow.addEventListener('click', prevSlide);
            if (nextArrow) nextArrow.addEventListener('click', nextSlide);
            
            // Touch events untuk swipe di mobile
            if (carouselContainer) {
                carouselContainer.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    // Hentikan animasi selama swipe
                    carouselContainer.style.transition = 'none';
                }, { passive: true });
                
                carouselContainer.addEventListener('touchmove', (e) => {
                    if (!startX) return;
                    
                    moveX = e.touches[0].clientX;
                    const diff = moveX - startX;
                    const offset = (diff / window.innerWidth) * 100;
                    
                    // Batas pergeseran selama swipe
                    if (Math.abs(offset) < 50) {
                        carouselContainer.style.transform = `translateX(calc(-${currentSlide * 100}% + ${offset}px))`;
                    }
                }, { passive: true });
                
                carouselContainer.addEventListener('touchend', (e) => {
                    carouselContainer.style.transition = 'transform 0.5s ease';
                    
                    if (!startX || !moveX) return;
                    
                    const diff = moveX - startX;
                    // Swipe kanan (prev) atau kiri (next)
                    if (diff > 50) {
                        prevSlide();
                    } else if (diff < -50) {
                        nextSlide();
                    } else {
                        // Kembali ke posisi slide saat ini jika swipe tidak cukup jauh
                        showSlide(currentSlide);
                    }
                    
                    // Reset nilai
                    startX = null;
                    moveX = null;
                }, { passive: true });
            }
            
            // Tampilkan slide pertama
            showSlide(0);
        }

        // Fungsi untuk menampilkan emergency popup dari bawah layar
        function showEmergencyConfirmation() {
            // Tutup modal emergency sebelumnya jika terbuka
            const modalEmergency = document.querySelector('#modalEmergency');
            if (modalEmergency && modalEmergency.classList.contains('show')) {
                modalEmergency.classList.remove('show');
                
                // Memberikan jeda animasi sebelum menampilkan popup baru
                setTimeout(() => {
                document.querySelector('#emergencyConfirmationPopup').classList.add('active');
                }, 300); // Jeda 300ms untuk smooth transition
            } else {
                // Langsung tampilkan popup jika modal tidak sedang terbuka
                document.querySelector('#emergencyConfirmationPopup').classList.add('active');
            }
            
            // Nonaktifkan scroll body agar tidak mengganggu popup
            document.body.style.overflow = 'hidden';
        }

        // Fungsi untuk menutup emergency popup dengan animasi slide-down
        function closeEmergencyConfirmation() {
            const emergencyPopup = document.querySelector('#emergencyConfirmationPopup');
            if (emergencyPopup) {
                emergencyPopup.classList.remove('active');
                
                // Aktifkan kembali scroll setelah popup tertutup
                setTimeout(() => {
                document.body.style.overflow = '';
                }, 400); // Jeda sampai animasi selesai
            }
        }

        // Tambahkan ini ke dalam fungsi kirimPesan() yang sudah ada
        function kirimPesan() {
            const input = document.querySelector('.input-with-icon input');
            if (input && input.value.trim() !== '') {
                input.value = '';
                
                // Tampilkan popup konfirmasi dengan animasi slide-up
                showEmergencyConfirmation();
                
                // Tracking untuk analitik (opsional)
                if (typeof gtag !== 'undefined') {
                gtag('event', 'emergency_message_sent', {
                    'event_category': 'Emergency',
                    'event_label': 'User sent emergency message'
                });
                }
            } else {
                alert('Silakan ketik pesan terlebih dahulu');
            }
        }
        
        // Menambahkan event listener untuk tombol darurat di modal emergency
        document.addEventListener('DOMContentLoaded', function() {
            // Menambahkan event listener untuk tombol-tombol darurat di modal
            const emergencyButtons = document.querySelectorAll('.emergency-button-option');
            emergencyButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Menampilkan popup konfirmasi darurat
                showEmergencyConfirmation();
            });
            });
            
            // Event listener untuk tombol Situasi Telah Aman
            const situationSafeButton = document.querySelector('#situationSafeButton');
            if (situationSafeButton) {
            situationSafeButton.addEventListener('click', function() {
                closeEmergencyConfirmation();
                // Fungsi tambahan bila diperlukan
                console.log('Situasi telah aman');
            });
            }
            
            // Event listener untuk tombol Tidak Sengaja Tertekan
            const accidentalPressButton = document.querySelector('#accidentalPressButton');
            if (accidentalPressButton) {
            accidentalPressButton.addEventListener('click', function() {
                closeEmergencyConfirmation();
                // Fungsi tambahan bila diperlukan
                console.log('Tombol tidak sengaja tertekan');
            });
            }
        });
    </script>
</body>
</html>